<template name="info">
	<section id="info">
		<hr>
			{{ #if viewingHistory }}
				<button type="button" class="btn btn-default btn-sm pull-right hideHistory">
					<i class="fa fa-times-circle-o" aria-hidden="true"></i> 
					Hide history
				</button>
			{{ else }}
				{{ #if currentUserIsEditing }}
					<div class="btn-group pull-right">
						<button type="button" class="btn btn-default btn-sm save">
							<i class="fa fa-floppy-o" aria-hidden="true"></i> Save
						</button>
						<button type="button" class="btn btn-default btn-sm cancel">
							<i class="fa fa-times" aria-hidden="true"></i> Cancel
						</button>
					</div>
				{{ else }}
					<div class="btn-group pull-right">
					{{ #if locked }}
						{{ #if isInRole 'curator' }}
							<button type="button" class="btn btn-default btn-sm edit" disabled>
								<i class="fa fa-pencil-square-o" aria-hidden="true"></i> Edit (locked)
							</button>
						{{ /if }}
					{{ else }}
						{{ #if isInRole 'curator' }}
							<button type="button" class="btn btn-default btn-sm edit">
								<i class="fa fa-pencil-square-o" aria-hidden="true"></i> Edit
							</button>
						{{ /if }}
						{{ #if editNumber }}
							<button type="button" class="btn btn-default btn-sm pull-right viewingHistory">
								<i class="fa fa-history" aria-hidden="true"></i> 
								Show history
								<small><span class="label label-default label-as-badge">{{ editNumber }}</span></small> 
							</button>
						{{ /if }}
					{{ /if }}
					</div>
				{{ /if }}
			{{ /if }}
		<h3>General information</h3>
		{{ #if viewingHistory }}
			<div class="alert alert-danger" role="alert">
			<i class="fa fa-exclamation-circle" aria-hidden="true"></i>
			You are watching version <b>{{ currentVersion }} / {{ editNumber }}</b> of this gene by {{ editBy }} at {{ editAt }}.
			{{ #if isInRole 'curator' }}
				<a href="#" class="alert-link">Click here to revert to this version.</a>
			{{ /if }} 
			</div>
			<nav>
			  <ul class="pager">
			    <li class="previous"><a href="#"><i class="fa fa-arrow-left" aria-hidden="true"></i> Older</a></li>
			    <li class="next"><a href="#">Newer <i class="fa fa-arrow-right" aria-hidden="true"></i></a></li>
			  </ul>
			</nav>
		{{ else }}

		{{ /if }}
		{{ #with versionHistory }}
			<div class="table-responive">
				<table class="table table-hover">
					<tbody>
						<tr>
							<td>Reference</td>
							<td>{{ this.reference }}</td>
						</tr>
						<tr>
							<td>Genome coordinates</td>
							<td>{{ this.seqid }} {{ this.start }}..{{this.end}} {{ this.strand }}</td>
						</tr>
						<tr>
							<td>Source</td>
							<td>{{ this.source }}</td>
						</tr>
						{{ #if currentUserIsEditing }}
							{{ #each attributes }}
								<tr>
									<td>{{this.key}}</td>
									<td>
										<div class="row">
											<div class="col-sm-8">
												<input type="text" class="form-control" id="{{this.key}}" value="{{this.value}}">
											</div>
											<div class="col-sm-4">
												<button type="button" class="btn btn-danger btn-sm remove-attribute" id="{{this.key}}">
													<i class="fa fa-times" aria-hidden="true"></i> Delete attribute
												</button>
											</div>
										</div>
									</td>
								</tr>
							{{ /each }}
							{{ #if addingNewAttribute }}
								<tr>
									<td>
										<label>New attribute key:
										<input type="text" class="form-control" list="attributeKeys" id="newAttributeKey" /></label>
										<datalist id="attributeKeys">
											{{ #each availableAttributes }}
										  		<option value="{{this.ID}}"></option>
										  	{{ /each }}
										  	<option value="test"></option>
										</datalist>
									</td>
									<td>
										<label>New attribute value:
										<input type="text" class="form-control" id="newAttributeValue" /></label>
									</td>
								</tr>
							{{ /if }}
						{{ else }}
							{{ #each attributes }}
								<tr>
									<td>{{ this.key }}</td>
									<td>{{ this.value }}</td>
								</tr>
							{{ /each }}
						{{ /if }}
					</tbody>
				</table>
				{{ #if currentUserIsEditing }}
					{{ #unless addingNewAttribute }}
						<div class="new-attribute">
							<button type="button" class="btn btn-success btn-sm add-attribute">
								<i class="fa fa-plus" aria-hidden="true"></i> Add new attribute
							</button>
						</div>
					{{ /unless }}
				{{ /if }}
			</div>
		{{ /with }}
	</section>
</template>