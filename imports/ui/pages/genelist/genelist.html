<template name="genelist">
  <div class="container-fluid">
  	<div class="genelist row">
      <div class="col-md-3">
        {{ >filter }}
      </div>
      <div class="col-md-9 clearfix">
        <!-- genelist -->
        
          <div class="pull-right btn-group" role="group">
              {{ #if selection }}
              <button type="button" class="btn btn-success" data-toggle="modal" data-target="#download-modal">
                <i class="fa fa-download" aria-hidden="true"></i> Download 
              </button>
              <button type="button" class="btn btn-warning" data-toggle="modal" data-target="#download-modal">
                <i class="fa fa-external-link" aria-hidden="true"></i> Send 
              </button>
              {{ /if }}
              <button type="button" class="btn btn-default select-all">
                <span class="select-button glyphicon glyphicon-ok {{isChecked}}"></span>
              </button>
          </div>
      
          <div class="btn-group" role="group">
            <button type="button" class="btn btn-default active">
              <span class="glyphicon glyphicon-sort-by-attributes-alt"></span>
            </button>
            <button type="button" class="btn btn-default">
              <span class="glyphicon glyphicon-sort-by-attributes"></span>
            </button>
          </div>
            
          <b>{{ queryCount }}</b> query results
        </div>
        <div class="col-md-9 clearfix">
 
            {{ #if genes.count }}
              <ul class="genelist list-group">
              {{ #each genes }}
                <li class="list-group-item">
                  <button type="button" class="btn btn-default select-gene pull-right">
                    <span class="select-button glyphicon glyphicon-ok {{isChecked}}"></span>
                  </button>
                  <p>
                    <a class="genelink" href="/gene/{{ID}}">{{ ID }}</a>
                    <b> {{ attributes.Name }} </b>
                    {{ attributes.Note }}
                  <!-- {{ >expression }} -->
                  <!-- {{ >info }} -->
                  </p>
                </li>
              {{ /each }}
            </ul>
            {{ #if moreResults }}
              <div id="showMoreGenes">
                {{> loading }}
              </div>
            {{ /if }}
          {{ else }}
            {{ #if Template.subscriptionsReady }}
              <div class="alert alert-danger" role="alert"><i class="fa fa-exclamation-circle" aria-hidden="true"></i> No search results</div>
            {{ else }}
              {{> loading }}
            {{ /if }}
          {{ /if }}
        
        <!-- end genelist -->
      </div>
  	</div>
  </div>
  <!-- download modal -->
  <div class="modal" id="download-modal" tabindex="-1" role="dialog">
    <div class="modal-dialog" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                <span aria-hidden="true">&times;</span>
              </button>
              <h4 class="modal-title" id="myModalLabel">
                Download data for 
                <b>
                  {{ #if selection.length }}
                    {{ selection.length }}
                  {{ else }}
                    {{ queryCount }}
                  {{ /if }}
                </b>
                genes 
              </h4>
        </div>
        <div class="modal-body">
          <form class="form-horizontal" id="download-form">
            <ul class="nav nav-tabs">
              <li class="nav-item download-format active" id="gff3">
                <a class="nav-link" href="#">gff3</a>
              </li>
              <li class="nav-item download-format" id="fasta">
                <a class="nav-link" href="#">fasta</a>
              </li>
            </ul>
            <h4>Preview:</h4>
            <div class="well"><i>Download preview is not working</i></div>
          </form>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-success save" id="download"><span class="glyphicon glyphicon-download"></span> Download</button>
        </div>
      </div>
    </div> 
  </div>
  <!-- end download modal -->
</template>