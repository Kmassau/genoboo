<!doctype html>
<html>
<head>
  <meta charset='utf-8' />
  <title>server-router 1.2.0 | Documentation</title>
  <meta name='viewport' content='width=device-width,initial-scale=1'>
  <link href='assets/bass.css' type='text/css' rel='stylesheet' />
  <link href='assets/style.css' type='text/css' rel='stylesheet' />
  <link href='assets/github.css' type='text/css' rel='stylesheet' />
</head>
<body class='documentation'>
  <div class='max-width-4 mx-auto'>
    <div class='clearfix md-mxn2'>
      <div class='fixed xs-hide fix-3 overflow-auto max-height-100'>
        <div class='py1 px2'>
          <h3 class='mb0 no-anchor'>server-router</h3>
          <div class='mb1'><code>1.2.0</code></div>
          <input
            placeholder='Filter'
            id='filter-input'
            class='col12 block input'
            type='text' />
          <div id='toc'>
            <ul class='list-reset h5 py1-ul'>
              
                
                <li><a
                  href='#readme'
                  class="h5 bold black caps">
                  README
                  
                </a>
                
                </li>
              
                
                <li><a
                  href='#types'
                  class="h5 bold black caps">
                  Types
                  
                </a>
                
                </li>
              
                
                <li><a
                  href='#path'
                  class="">
                  Path
                  
                </a>
                
                </li>
              
                
                <li><a
                  href='#argsmapper'
                  class="">
                  ArgsMapper
                  
                </a>
                
                </li>
              
                
                <li><a
                  href='#route'
                  class="">
                  Route
                  
                </a>
                
                </li>
              
                
                <li><a
                  href='#serverroutercontext'
                  class="">
                  ServerRouterContext
                  
                </a>
                
                </li>
              
                
                <li><a
                  href='#routes'
                  class="">
                  Routes
                  
                </a>
                
                </li>
              
                
                <li><a
                  href='#classes'
                  class="h5 bold black caps">
                  Classes
                  
                </a>
                
                </li>
              
                
                <li><a
                  href='#serverrouter'
                  class=" toggle-sibling">
                  ServerRouter
                  <span class='icon'>▸</span>
                </a>
                
                <div class='toggle-target display-none'>
                  
                  <ul class='list-reset py1-ul pl1'>
                    <li class='h5'><span>Static members</span></li>
                    
                      <li><a
                        href='#ServerRouter.middleware'
                        class='regular pre-open'>
                        .middleware
                      </a></li>
                    
                    </ul>
                  
                  
                    <ul class='list-reset py1-ul pl1'>
                      <li class='h5'><span>Instance members</span></li>
                      
                      <li><a
                        href='#ServerRouter#addPath'
                        class='regular pre-open'>
                        #addPath
                      </a></li>
                      
                      <li><a
                        href='#ServerRouter#addPaths'
                        class='regular pre-open'>
                        #addPaths
                      </a></li>
                      
                      <li><a
                        href='#ServerRouter#addRoutes'
                        class='regular pre-open'>
                        #addRoutes
                      </a></li>
                      
                      <li><a
                        href='#ServerRouter#middleware'
                        class='regular pre-open'>
                        #middleware
                      </a></li>
                      
                    </ul>
                  
                  
                  
                </div>
                
                </li>
              
                
                <li><a
                  href='#authenticationrequirederror'
                  class="">
                  AuthenticationRequiredError
                  
                </a>
                
                </li>
              
                
                <li><a
                  href='#serverrouterclient'
                  class=" toggle-sibling">
                  ServerRouterClient
                  <span class='icon'>▸</span>
                </a>
                
                <div class='toggle-target display-none'>
                  
                  
                    <ul class='list-reset py1-ul pl1'>
                      <li class='h5'><span>Instance members</span></li>
                      
                      <li><a
                        href='#ServerRouterClient#redirect'
                        class='regular pre-open'>
                        #redirect
                      </a></li>
                      
                      <li><a
                        href='#ServerRouterClient#path'
                        class='regular pre-open'>
                        #path
                      </a></li>
                      
                      <li><a
                        href='#ServerRouterClient#redirectTo'
                        class='regular pre-open'>
                        #redirectTo
                      </a></li>
                      
                      <li><a
                        href='#ServerRouterClient#redirectToRoute'
                        class='regular pre-open'>
                        #redirectToRoute
                      </a></li>
                      
                      <li><a
                        href='#ServerRouterClient#authenticatePath'
                        class='regular pre-open'>
                        #authenticatePath
                      </a></li>
                      
                      <li><a
                        href='#ServerRouterClient#getRoutePath'
                        class='regular pre-open'>
                        #getRoutePath
                      </a></li>
                      
                    </ul>
                  
                  
                  
                </div>
                
                </li>
              
            </ul>
          </div>
          <div class='mt1 h6 quiet'>
            <a href='http://documentation.js.org/reading-documentation.html'>Need help reading this?</a>
          </div>
        </div>
      </div>
      <div class='fix-margin-3'>
        
          
            <div class='keyline-top-not py2'><section class='py2 clearfix'>

  <h2 id='readme' class='mt0'>
    README
  </h2>

  
    <h1>mhagmajer:server-router</h1>
<p>Server router with authentication for Meteor</p>
<p>Introductory blog post:
<a href="https://blog.hagmajer.com/server-side-routing-with-authentication-in-meteor-6625ed832a94">https://blog.hagmajer.com/server-side-routing-with-authentication-in-meteor-6625ed832a94</a>.</p>
<p>Documentation: <a href="https://mhagmajer.github.io/server-router/">https://mhagmajer.github.io/server-router/</a>.</p>
<h1>Compatibility</h1>
<p>Please beware that:</p>
<ul>
<li>versions 1.2.x and above require Meteor 1.6.1+</li>
<li>versions 1.1.x and below require Meteor 1.4.4.2-1.6</li>
</ul>
<h1>Installing</h1>
<p><code>meteor add mhagmajer:server-router</code></p>
<p>You can find Flow type definitions in <code>/definitions</code>.</p>
<h1>Example</h1>
<h2>Server-side</h2>
<pre class='hljs'><span class="hljs-keyword">import</span> { ServerRouter } <span class="hljs-keyword">from</span> <span class="hljs-string">'meteor/mhagmajer:server-router'</span>;

WebApp.connectHandlers.use(ServerRouter.middleware({
  <span class="hljs-attr">paths</span>: [],
  <span class="hljs-attr">routes</span>: {
    hello(name) {
      <span class="hljs-keyword">this</span>.res.end(<span class="hljs-string">`You <span class="hljs-subst">${name}</span>, your id is <span class="hljs-subst">${<span class="hljs-keyword">this</span>.userId}</span>`</span>);
    },
  },
}));</pre>
<h2>Client-side</h2>
<pre class='hljs'><span class="hljs-keyword">import</span> { ServerRouterClient } <span class="hljs-keyword">from</span> <span class="hljs-string">'meteor/mhagmajer:server-router'</span>;

<span class="hljs-keyword">const</span> serverRouterClient = <span class="hljs-keyword">new</span> ServerRouterClient({
  <span class="hljs-attr">routes</span>: {
    <span class="hljs-attr">hello</span>: <span class="hljs-number">1</span>,
  },
});

<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{()</span> =&gt;</span> {
  serverRouterClient.redirect.hello('John');  
}} /&gt;</span></pre>
<h1>Publishing (contributors)</h1>
<p>Run <code>npm run clean</code> before <code>meteor publish</code>.</p>

  
</section>
</div>
          
        
          
            <div class='keyline-top-not py2'><section class='py2 clearfix'>

  <h2 id='types' class='mt0'>
    Types
  </h2>

  
</section>
</div>
          
        
          
            <section class='p2 mb2 clearfix bg-white minishadow'>

  
  <div class='clearfix'>
    
    <h3 class='fl m0' id='path'>
      Path
    </h3>
    
    
  </div>
  

  <p>Basic object of the router representing a server-side path available via HTTP request.
For each <code>path</code> matching the request url, a handler (<a href="#route">Route</a>) is called with <code>this</code> bound
to the context of the request (<a href="#serverroutercontext">ServerRouterContext</a>).</p>
<p>Initalized with the following data:</p>
<ul>
<li><strong>path</strong> (<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String">string</a>): url path in format acceptable by
<a href="https://www.npmjs.com/package/path-to-regexp">path-to-regexp</a>.</li>
<li>
<p><strong>options</strong>: Optional data passed to <code>path-to-regexp</code>.</p>
<ul>
<li><strong>sensitive</strong> (<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String">string</a> = <code>false</code>): When <code>true</code> the path will be case sensitive.</li>
<li><strong>strict</strong> (<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String">string</a> = <code>false</code>): When <code>false</code> the trailing slash is optional.</li>
<li><strong>end</strong> (<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String">string</a> = <code>false</code>): When <code>false</code> the path will match at the beginning.</li>
<li><strong>delimiter</strong> (<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String">string</a> = <code>/</code>): Set the default delimiter for repeat parameters.</li>
</ul>
</li>
<li><strong>args</strong> (<a href="#argsmapper">ArgsMapper</a>) mapper of <code>params</code> and <code>query</code> to route arguments.</li>
<li><strong>route</strong> (<a href="#route">Route</a>) function to be called when <code>path</code> matches.</li>
</ul>


  <div class='pre p1 fill-light mt0'>Path</div>
  
    <p>
      Type:
      {path: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String">string</a>, options: {sensitive: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Boolean">boolean</a>?, strict: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Boolean">boolean</a>?, end: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Boolean">boolean</a>?, delimiter: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String">string</a>?}?, args: <a href="#argsmapper">ArgsMapper</a>, route: <a href="#route">Route</a>}
    </p>
  
  

  
  
  
  
  
  

  

  
    <div class='py1 quiet mt1 prose-big'>Properties</div>
    <div>
      
        <div class='space-bottom0'>
          <span class='code bold'>path</span> <code class='quiet'>(<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String">string</a>)</code>
          
          
        </div>
      
        <div class='space-bottom0'>
          <span class='code bold'>options</span> <code class='quiet'>({sensitive: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Boolean">boolean</a>?, strict: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Boolean">boolean</a>?, end: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Boolean">boolean</a>?, delimiter: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String">string</a>?}?)</code>
          
          
        </div>
      
        <div class='space-bottom0'>
          <span class='code bold'>options.sensitive</span> <code class='quiet'>(<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Boolean">boolean</a>?)</code>
          
          
        </div>
      
        <div class='space-bottom0'>
          <span class='code bold'>options.strict</span> <code class='quiet'>(<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Boolean">boolean</a>?)</code>
          
          
        </div>
      
        <div class='space-bottom0'>
          <span class='code bold'>options.end</span> <code class='quiet'>(<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Boolean">boolean</a>?)</code>
          
          
        </div>
      
        <div class='space-bottom0'>
          <span class='code bold'>options.delimiter</span> <code class='quiet'>(<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String">string</a>?)</code>
          
          
        </div>
      
        <div class='space-bottom0'>
          <span class='code bold'>args</span> <code class='quiet'>(<a href="#argsmapper">ArgsMapper</a>)</code>
          
          
        </div>
      
        <div class='space-bottom0'>
          <span class='code bold'>route</span> <code class='quiet'>(<a href="#route">Route</a>)</code>
          
          
        </div>
      
    </div>
  

  

  

  
    <div class='py1 quiet mt1 prose-big'>Example</div>
    
      
      <pre class='p1 overflow-auto round fill-light'>serverRouter.addPath({
  <span class="hljs-attr">path</span>: <span class="hljs-string">'/binary-representation/:n'</span>,
  <span class="hljs-attr">args</span>: <span class="hljs-function">(<span class="hljs-params">{ n }</span>) =&gt;</span> [<span class="hljs-built_in">Number</span>(n)],
  <span class="hljs-keyword">async</span> route(n) {
    <span class="hljs-keyword">this</span>.res.end(n.toString(<span class="hljs-number">2</span>));
  },
});
<span class="hljs-comment">// GET /binary-representation/1337</span>
<span class="hljs-comment">// 10100111001</span></pre>
    
      
      <pre class='p1 overflow-auto round fill-light'>serverRouter.addPath({
  <span class="hljs-attr">path</span>: <span class="hljs-string">'/sum/:n+'</span>,
  <span class="hljs-attr">args</span>: <span class="hljs-function">(<span class="hljs-params">{ n }</span>) =&gt;</span> n.map(<span class="hljs-built_in">Number</span>),
  <span class="hljs-keyword">async</span> route(...nums) {
    <span class="hljs-keyword">this</span>.res.end(<span class="hljs-built_in">String</span>(nums.reduce(<span class="hljs-function">(<span class="hljs-params">a, b</span>) =&gt;</span> a + b)));
  },
});
<span class="hljs-comment">// GET /sum/1/2/3</span>
<span class="hljs-comment">// 6</span></pre>
    
      
      <pre class='p1 overflow-auto round fill-light'>serverRouter.addPath({
  <span class="hljs-attr">path</span>: <span class="hljs-string">'/get-query'</span>,
  <span class="hljs-attr">args</span>: <span class="hljs-function">(<span class="hljs-params">params, query</span>) =&gt;</span> [query],
  <span class="hljs-keyword">async</span> route(query) {
    <span class="hljs-keyword">this</span>.res.end(<span class="hljs-built_in">String</span>(<span class="hljs-built_in">Object</span>.keys(query)));
  },
});
<span class="hljs-comment">// GET /get-query?a=&amp;b=</span>
<span class="hljs-comment">// a,b</span></pre>
    
  

  

  

  
</section>

          
        
          
            <section class='p2 mb2 clearfix bg-white minishadow'>

  
  <div class='clearfix'>
    
    <h3 class='fl m0' id='argsmapper'>
      ArgsMapper
    </h3>
    
    
  </div>
  

  <p>Function used to map params and query to actual route arguments.</p>


  <div class='pre p1 fill-light mt0'>ArgsMapper</div>
  
    <p>
      Type:
      function (params: {}, query: {}): <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array">Array</a>&#x3C;any>
    </p>
  
  

  
  
  
  
  
  

  
    <div class='py1 quiet mt1 prose-big'>Parameters</div>
    <div class='prose'>
      
        <div class='space-bottom0'>
          <div>
            <span class='code bold'>params</span> <code class='quiet'>(ObjectMap&#x3C;<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String">string</a>, (<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String">string</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array">Array</a>&#x3C;<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String">string</a>>)>)</code>
	    name parameters matched in path.

          </div>
          
        </div>
      
        <div class='space-bottom0'>
          <div>
            <span class='code bold'>query</span> <code class='quiet'>(ObjectMap&#x3C;<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String">string</a>, <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String">string</a>>)</code>
	    url query parameters (following 
<code>?</code>
).

          </div>
          
        </div>
      
    </div>
  

  

  
    
      <div class='py1 quiet mt1 prose-big'>Returns</div>
      <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array">Array</a>&#x3C;any></code>:
        arguments that the route will be called with.

      
    
  

  

  

  

  

  
</section>

          
        
          
            <section class='p2 mb2 clearfix bg-white minishadow'>

  
  <div class='clearfix'>
    
    <h3 class='fl m0' id='route'>
      Route
    </h3>
    
    
  </div>
  

  <p>Path handler called with <code>this</code> bound to <a href="#serverroutercontext">ServerRouterContext</a>.</p>
<p>In order to respond to HTTP request, you should write to <code>this.res</code> object. By default, request
processing is finished once your handler finishes. If you want to disable this behavior, you can
<code>return false</code> to pass the processing to the next handler. Note that the response (<code>this.res</code>)
must eventually be ended during the HTTP request processing by a route within ServerRouter or
some other middleware.</p>
<p>Any exceptions thrown in handlers other than <a href="#authenticationrequirederror">AuthenticationRequiredError</a> are presented
in response.</p>


  <div class='pre p1 fill-light mt0'>Route</div>
  
    <p>
      Type:
      function (): <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise">Promise</a>&#x3C;(void | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Boolean">boolean</a>)>
    </p>
  
  

  
  
  
  
  
  

  

  

  
    
      <div class='py1 quiet mt1 prose-big'>Returns</div>
      <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise">Promise</a>&#x3C;(<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Boolean">boolean</a> | void)></code>:
        whether the request processing is complete (defaults to true).

      
    
  

  
    <div class='py1 quiet mt1 prose-big'>Throws</div>
    <ul>
      
        <li><a href="#authenticationrequirederror">AuthenticationRequiredError</a>: if access to this route requires authentication. It will
cause this route to be called again with 
<code>this.userId</code>
 to be set to the current user (if any).
</li>
      
    </ul>
  

  

  

  

  
</section>

          
        
          
            <section class='p2 mb2 clearfix bg-white minishadow'>

  
  <div class='clearfix'>
    
    <h3 class='fl m0' id='serverroutercontext'>
      ServerRouterContext
    </h3>
    
    
  </div>
  

  <p>Object to which <code>this</code> is bound to inside your <a href="#route">Route</a> invocation. It provides the
following:</p>
<ul>
<li><strong>req</strong> (<a href="https://nodejs.org/api/http.html#http_class_http_incomingmessage">IncomingMessage</a>):
information about the incoming request.</li>
<li><strong>res</strong> (<a href="http://nodejs.org/api/http.html#http_class_http_serverresponse">ServerResponse</a>):
use this to write data that should be sent in response to the request.</li>
<li><strong>userId</strong> (<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String">string</a>?): the id of the current user.</li>
</ul>
<p>This object is preserved between calling matched routes, so you can augment it.</p>


  <div class='pre p1 fill-light mt0'>ServerRouterContext</div>
  
    <p>
      Type:
      {req: IncomingMessage, res: ServerResponse, userId: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String">string</a>?}
    </p>
  
  

  
  
  
  
  
  

  

  
    <div class='py1 quiet mt1 prose-big'>Properties</div>
    <div>
      
        <div class='space-bottom0'>
          <span class='code bold'>req</span> <code class='quiet'>(IncomingMessage)</code>
          
          
        </div>
      
        <div class='space-bottom0'>
          <span class='code bold'>res</span> <code class='quiet'>(ServerResponse)</code>
          
          
        </div>
      
        <div class='space-bottom0'>
          <span class='code bold'>userId</span> <code class='quiet'>(<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String">string</a>?)</code>
          
          
        </div>
      
    </div>
  

  

  

  

  

  

  
</section>

          
        
          
            <section class='p2 mb2 clearfix bg-white minishadow'>

  
  <div class='clearfix'>
    
    <h3 class='fl m0' id='routes'>
      Routes
    </h3>
    
    
  </div>
  

  <p>Nested dictionary of <a href="#route">Route</a> functions. This allows for namespaces.</p>


  <div class='pre p1 fill-light mt0'>Routes</div>
  
    <p>
      Type:
      {}
    </p>
  
  

  
  
  
  
  
  

  

  

  

  

  
    <div class='py1 quiet mt1 prose-big'>Example</div>
    
      
      <pre class='p1 overflow-auto round fill-light'>serverRouter.addRoutes({
  <span class="hljs-attr">reports</span>: {
    salesPDF, <span class="hljs-comment">// available by name 'reports.salesPDF'</span>
    employeesPDF,
  },
  <span class="hljs-attr">images</span>: {
    <span class="hljs-attr">pngs</span>: {
      <span class="hljs-keyword">async</span> logo() { ... }, <span class="hljs-comment">// name: 'images.pngs.logo'</span>
    },
  },
});</pre>
    
  

  

  

  
</section>

          
        
          
            <div class='keyline-top-not py2'><section class='py2 clearfix'>

  <h2 id='classes' class='mt0'>
    Classes
  </h2>

  
</section>
</div>
          
        
          
            <section class='p2 mb2 clearfix bg-white minishadow'>

  
  <div class='clearfix'>
    
    <h3 class='fl m0' id='serverrouter'>
      ServerRouter
    </h3>
    
    
  </div>
  

  <p>Server-side routing provider of the <a href="https://github.com/senchalabs/connect">connect</a> API that
can be used with Meteor <a href="https://docs.meteor.com/packages/webapp.html">webapp</a> package.</p>


  <div class='pre p1 fill-light mt0'>new ServerRouter(options: {routes: <a href="#routes">Routes</a>?, defaultRoutePath: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String">string</a>?, paths: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array">Array</a>&#x3C;<a href="#path">Path</a>>?})</div>
  
  

  
  
  
  
  
  

  
    <div class='py1 quiet mt1 prose-big'>Parameters</div>
    <div class='prose'>
      
        <div class='space-bottom0'>
          <div>
            <span class='code bold'>options</span> <code class='quiet'>({routes: <a href="#routes">Routes</a>?, defaultRoutePath: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String">string</a>?, paths: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array">Array</a>&#x3C;<a href="#path">Path</a>>?})</code>
	    
          </div>
          
          <table class='mt1 mb2 fixed-table h5 col-12'>
            <colgroup>
              <col width='30%' />
              <col width='70%' />
            </colgroup>
            <thead>
              <tr class='bold fill-light'>
                <th>Name</th>
                <th>Description</th>
              </tr>
            </thead>
            <tbody class='mt1'>
              
                <tr>
                  <td class='break-word'><span class='code bold'>options.paths</span> <code class='quiet'><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array">Array</a>&#x3C;<a href="#path">Path</a>>?</code>
                  
                    (default <code>[]</code>)
                  </td>
                  <td class='break-word'><span>Initial paths. You can add more with

<a href="#ServerRouter#addPaths">#ServerRouter#addPaths</a>
 or 
<a href="#ServerRouter#addPath">#ServerRouter#addPath</a>
.
</span></td>
                </tr>
              
                <tr>
                  <td class='break-word'><span class='code bold'>options.routes</span> <code class='quiet'><a href="#routes">Routes</a>?</code>
                  
                    (default <code>{}</code>)
                  </td>
                  <td class='break-word'><span>Initial routes. You can add more with

<a href="#ServerRouter#addRoutes">#ServerRouter#addRoutes</a>
.
</span></td>
                </tr>
              
                <tr>
                  <td class='break-word'><span class='code bold'>options.defaultRoutePath</span> <code class='quiet'><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String">string</a>?</code>
                  
                    (default <code>/r/:name/:args*</code>)
                  </td>
                  <td class='break-word'><span>Any added 
<a href="#route">Route</a>
 can be
reached by this path when provided its nested name and arguments. See 
<a href="#path">Path</a>
 for more on
syntax. Should be unique for every ServerRouter instance (if you need more than one).
Arguments are serialized with 
<a href="https://docs.meteor.com/api/ejson.html">EJSON</a>
 for transportation.
</span></td>
                </tr>
              
            </tbody>
          </table>
          
        </div>
      
    </div>
  

  

  

  

  
    <div class='py1 quiet mt1 prose-big'>Example</div>
    
      
      <pre class='p1 overflow-auto round fill-light'>WebApp.connectHandlers.use((<span class="hljs-keyword">new</span> ServerRouter({
  <span class="hljs-attr">routes</span>: { ... },
  <span class="hljs-attr">paths</span>: [ ... ],
})).middleware);</pre>
    
      
      <pre class='p1 overflow-auto round fill-light'>WebApp.connectHandlers.use(ServerRouter.middleware({
  <span class="hljs-attr">routes</span>: { ... },
  <span class="hljs-attr">paths</span>: [ ... ],
}));</pre>
    
      
      <pre class='p1 overflow-auto round fill-light'><span class="hljs-keyword">const</span> serverRouter = <span class="hljs-keyword">new</span> ServerRouter();
WebApp.connectHandlers.use(serverRouter.middleware);

serverRouter.addPaths([ ... ]);
serverRouter.addRoutes({ ... });</pre>
    
  

  
    <div class='py1 quiet mt1 prose-big'>Static Members</div>
    <div class="clearfix">
  
    <div class='border-bottom' id='ServerRouter.middleware'>
      <div class="clearfix small pointer toggle-sibling">
        <div class="py1 contain">
            <a class='icon pin-right py1 dark-link caret-right'>▸</a>
            <span class='code strong strong truncate'>middleware(options)</span>
        </div>
      </div>
      <div class="clearfix display-none toggle-target">
        <section class='p2 mb2 clearfix bg-white minishadow'>

  

  <p>Short for <code>(new ServerRouter(options)).middleware</code>.</p>


  <div class='pre p1 fill-light mt0'>middleware(options: any)</div>
  
  

  
  
  
  
  
  

  
    <div class='py1 quiet mt1 prose-big'>Parameters</div>
    <div class='prose'>
      
        <div class='space-bottom0'>
          <div>
            <span class='code bold'>options</span> <code class='quiet'>(any)</code>
	    
          </div>
          
        </div>
      
    </div>
  

  

  

  

  

  

  

  
</section>

      </div>
    </div>
  
</div>

  

  
    <div class='py1 quiet mt1 prose-big'>Instance Members</div>
    <div class="clearfix">
  
    <div class='border-bottom' id='ServerRouter#addPath'>
      <div class="clearfix small pointer toggle-sibling">
        <div class="py1 contain">
            <a class='icon pin-right py1 dark-link caret-right'>▸</a>
            <span class='code strong strong truncate'>addPath(data)</span>
        </div>
      </div>
      <div class="clearfix display-none toggle-target">
        <section class='p2 mb2 clearfix bg-white minishadow'>

  

  <p>Adds a single path.</p>


  <div class='pre p1 fill-light mt0'>addPath(data: <a href="#path">Path</a>)</div>
  
  

  
  
  
  
  
  

  
    <div class='py1 quiet mt1 prose-big'>Parameters</div>
    <div class='prose'>
      
        <div class='space-bottom0'>
          <div>
            <span class='code bold'>data</span> <code class='quiet'>(<a href="#path">Path</a>)</code>
	    
          </div>
          
        </div>
      
    </div>
  

  

  

  

  

  

  

  
</section>

      </div>
    </div>
  
    <div class='border-bottom' id='ServerRouter#addPaths'>
      <div class="clearfix small pointer toggle-sibling">
        <div class="py1 contain">
            <a class='icon pin-right py1 dark-link caret-right'>▸</a>
            <span class='code strong strong truncate'>addPaths(data)</span>
        </div>
      </div>
      <div class="clearfix display-none toggle-target">
        <section class='p2 mb2 clearfix bg-white minishadow'>

  

  <p>Adds a list of paths. Short for calling <a href="#ServerRouter#addPath">#ServerRouter#addPath</a> a number of times.</p>


  <div class='pre p1 fill-light mt0'>addPaths(data: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array">Array</a>&#x3C;<a href="#path">Path</a>>)</div>
  
  

  
  
  
  
  
  

  
    <div class='py1 quiet mt1 prose-big'>Parameters</div>
    <div class='prose'>
      
        <div class='space-bottom0'>
          <div>
            <span class='code bold'>data</span> <code class='quiet'>(<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array">Array</a>&#x3C;<a href="#path">Path</a>>)</code>
	    
          </div>
          
        </div>
      
    </div>
  

  

  

  

  

  

  

  
</section>

      </div>
    </div>
  
    <div class='border-bottom' id='ServerRouter#addRoutes'>
      <div class="clearfix small pointer toggle-sibling">
        <div class="py1 contain">
            <a class='icon pin-right py1 dark-link caret-right'>▸</a>
            <span class='code strong strong truncate'>addRoutes(routes)</span>
        </div>
      </div>
      <div class="clearfix display-none toggle-target">
        <section class='p2 mb2 clearfix bg-white minishadow'>

  

  <p>Merges new routes into existing routes.</p>


  <div class='pre p1 fill-light mt0'>addRoutes(routes: <a href="#routes">Routes</a>)</div>
  
  

  
  
  
  
  
  

  
    <div class='py1 quiet mt1 prose-big'>Parameters</div>
    <div class='prose'>
      
        <div class='space-bottom0'>
          <div>
            <span class='code bold'>routes</span> <code class='quiet'>(<a href="#routes">Routes</a>)</code>
	    
          </div>
          
        </div>
      
    </div>
  

  

  

  

  
    <div class='py1 quiet mt1 prose-big'>Example</div>
    
      
      <pre class='p1 overflow-auto round fill-light'>serverRouter.addRoutes({
  myRoute() { ... },
  <span class="hljs-attr">privateImages</span>: {
    img1() { ... },
    img2() { ... },
  },
});</pre>
    
  

  

  

  
</section>

      </div>
    </div>
  
    <div class='border-bottom' id='ServerRouter#middleware'>
      <div class="clearfix small pointer toggle-sibling">
        <div class="py1 contain">
            <a class='icon pin-right py1 dark-link caret-right'>▸</a>
            <span class='code strong strong truncate'>middleware</span>
        </div>
      </div>
      <div class="clearfix display-none toggle-target">
        <section class='p2 mb2 clearfix bg-white minishadow'>

  

  <p>Getter for middleware that used with Meteor's
<a href="https://docs.meteor.com/packages/webapp.html">webapp</a> package.</p>


  <div class='pre p1 fill-light mt0'>middleware</div>
  
    <p>
      Type:
      $PropertyType&#x3C;any, <code>"_middleware"</code>>
    </p>
  
  

  
  
  
  
  
  

  

  

  

  

  
    <div class='py1 quiet mt1 prose-big'>Example</div>
    
      
      <pre class='p1 overflow-auto round fill-light'>WebApp.connectHandlers.use(serverRouter.middleware);</pre>
    
  

  

  

  
</section>

      </div>
    </div>
  
</div>

  

  
</section>

          
        
          
            <section class='p2 mb2 clearfix bg-white minishadow'>

  
  <div class='clearfix'>
    
    <h3 class='fl m0' id='authenticationrequirederror'>
      AuthenticationRequiredError
    </h3>
    
    
  </div>
  

  <p>Thrown by routes when authentication is required for further processing.</p>


  <div class='pre p1 fill-light mt0'>new AuthenticationRequiredError()</div>
  
  

  
  
  
  
  
  

  

  

  

  

  

  

  

  
</section>

          
        
          
            <section class='p2 mb2 clearfix bg-white minishadow'>

  
  <div class='clearfix'>
    
    <h3 class='fl m0' id='serverrouterclient'>
      ServerRouterClient
    </h3>
    
    
  </div>
  

  <p>Client for ServerRouter</p>


  <div class='pre p1 fill-light mt0'>new ServerRouterClient(options: {routes: R?, defaultRoutePath: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String">string</a>?})</div>
  
  

  
  
  
  
  
  

  
    <div class='py1 quiet mt1 prose-big'>Parameters</div>
    <div class='prose'>
      
        <div class='space-bottom0'>
          <div>
            <span class='code bold'>options</span> <code class='quiet'>({routes: R?, defaultRoutePath: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String">string</a>?})</code>
	    
          </div>
          
          <table class='mt1 mb2 fixed-table h5 col-12'>
            <colgroup>
              <col width='30%' />
              <col width='70%' />
            </colgroup>
            <thead>
              <tr class='bold fill-light'>
                <th>Name</th>
                <th>Description</th>
              </tr>
            </thead>
            <tbody class='mt1'>
              
                <tr>
                  <td class='break-word'><span class='code bold'>options.routes</span> <code class='quiet'><a href="#routes">Routes</a></code>
                  
                    (default <code>{}</code>)
                  </td>
                  <td class='break-word'><span>Known server-side routes. When providing this object you can
substitute function with anything other than object. For example:
<pre class='hljs'><span class="hljs-keyword">const</span> x: any = <span class="hljs-number">1</span>;
<span class="hljs-keyword">const</span> routes: Routes = {
  <span class="hljs-attr">Reports</span>: {
    <span class="hljs-attr">genReport</span>: x,
    <span class="hljs-attr">genReport2</span>: x,
  },
};</pre>
<p>This is used to populate <a href="#ServerRouterClient#url">#ServerRouterClient#url</a> and</p>
</span></td>
                </tr>
              
                <tr>
                  <td class='break-word'><span class='code bold'>options.defaultRoutePath</span> <code class='quiet'><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String">string</a></code>
                  
                    (default <code>/r/:name/:args*</code>)
                  </td>
                  <td class='break-word'><span>Same as in 
<a href="#serverrouter">ServerRouter</a>
.
</span></td>
                </tr>
              
            </tbody>
          </table>
          
        </div>
      
    </div>
  

  

  

  

  

  

  
    <div class='py1 quiet mt1 prose-big'>Instance Members</div>
    <div class="clearfix">
  
    <div class='border-bottom' id='ServerRouterClient#redirect'>
      <div class="clearfix small pointer toggle-sibling">
        <div class="py1 contain">
            <a class='icon pin-right py1 dark-link caret-right'>▸</a>
            <span class='code strong strong truncate'>redirect</span>
        </div>
      </div>
      <div class="clearfix display-none toggle-target">
        <section class='p2 mb2 clearfix bg-white minishadow'>

  

  <p>Convenient methods for redirecting to a server route with authentication.</p>


  <div class='pre p1 fill-light mt0'>redirect</div>
  
    <p>
      Type:
      R
    </p>
  
  

  
  
  
  
  
  

  

  

  

  

  
    <div class='py1 quiet mt1 prose-big'>Example</div>
    
      
      <pre class='p1 overflow-auto round fill-light'>serverRouterClient.redirect.privateImages.img1(<span class="hljs-number">800</span>, <span class="hljs-number">600</span>);</pre>
    
  

  

  

  
</section>

      </div>
    </div>
  
    <div class='border-bottom' id='ServerRouterClient#path'>
      <div class="clearfix small pointer toggle-sibling">
        <div class="py1 contain">
            <a class='icon pin-right py1 dark-link caret-right'>▸</a>
            <span class='code strong strong truncate'>path</span>
        </div>
      </div>
      <div class="clearfix display-none toggle-target">
        <section class='p2 mb2 clearfix bg-white minishadow'>

  

  <p>Convenient getters of paths for server routes. Compatible with static type checkers like Flow.</p>
<p>Note: These methods return string, not Promise.</p>


  <div class='pre p1 fill-light mt0'>path</div>
  
    <p>
      Type:
      R
    </p>
  
  

  
  
  
  
  
  

  

  

  

  

  
    <div class='py1 quiet mt1 prose-big'>Example</div>
    
      
      <pre class='p1 overflow-auto round fill-light'><span class="hljs-built_in">console</span>.log(serverRouterClient.path.privateImages.img1(<span class="hljs-number">800</span>, <span class="hljs-number">600</span>));</pre>
    
  

  

  

  
</section>

      </div>
    </div>
  
    <div class='border-bottom' id='ServerRouterClient#redirectTo'>
      <div class="clearfix small pointer toggle-sibling">
        <div class="py1 contain">
            <a class='icon pin-right py1 dark-link caret-right'>▸</a>
            <span class='code strong strong truncate'>redirectTo(path)</span>
        </div>
      </div>
      <div class="clearfix display-none toggle-target">
        <section class='p2 mb2 clearfix bg-white minishadow'>

  

  <p>Redirects to given path with authentication. If you want to redirect to a publicly available
route, you can just do:</p>
<pre class='hljs'><span class="hljs-built_in">window</span>.location.href = <span class="hljs-string">'http://www.meteor.com/'</span>;</pre>
<p>Returns a promise so you catch any errors connected with the authentication itself.</p>


  <div class='pre p1 fill-light mt0'>redirectTo(path: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String">string</a>): <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise">Promise</a>&#x3C;void></div>
  
  

  
  
  
  
  
  

  
    <div class='py1 quiet mt1 prose-big'>Parameters</div>
    <div class='prose'>
      
        <div class='space-bottom0'>
          <div>
            <span class='code bold'>path</span> <code class='quiet'>(<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String">string</a>)</code>
	    
          </div>
          
        </div>
      
    </div>
  

  

  
    
      <div class='py1 quiet mt1 prose-big'>Returns</div>
      <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise">Promise</a>&#x3C;void></code>
    
  

  

  

  

  

  
</section>

      </div>
    </div>
  
    <div class='border-bottom' id='ServerRouterClient#redirectToRoute'>
      <div class="clearfix small pointer toggle-sibling">
        <div class="py1 contain">
            <a class='icon pin-right py1 dark-link caret-right'>▸</a>
            <span class='code strong strong truncate'>redirectToRoute(name, args)</span>
        </div>
      </div>
      <div class="clearfix display-none toggle-target">
        <section class='p2 mb2 clearfix bg-white minishadow'>

  

  <p>Redirects to given route and args with authenication. Short for (example):</p>
<pre class='hljs'>serverRouterClient.redirectTo(serverRouterClient.getRoutePath(<span class="hljs-string">'privateImages.img1'</span>, <span class="hljs-number">800</span>, <span class="hljs-number">600</span>));</pre>
<p>Returns a promise for the same reason like <a href="#ServerRouterClient#redirectTo">#ServerRouterClient#redirectTo</a>.</p>


  <div class='pre p1 fill-light mt0'>redirectToRoute(name: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String">string</a>, args: ...<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array">Array</a>&#x3C;any>)</div>
  
  

  
  
  
  
  
  

  
    <div class='py1 quiet mt1 prose-big'>Parameters</div>
    <div class='prose'>
      
        <div class='space-bottom0'>
          <div>
            <span class='code bold'>name</span> <code class='quiet'>(<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String">string</a>)</code>
	    
          </div>
          
        </div>
      
        <div class='space-bottom0'>
          <div>
            <span class='code bold'>args</span> <code class='quiet'>(...<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array">Array</a>&#x3C;any>)</code>
	    
          </div>
          
        </div>
      
    </div>
  

  

  

  

  

  

  

  
</section>

      </div>
    </div>
  
    <div class='border-bottom' id='ServerRouterClient#authenticatePath'>
      <div class="clearfix small pointer toggle-sibling">
        <div class="py1 contain">
            <a class='icon pin-right py1 dark-link caret-right'>▸</a>
            <span class='code strong strong truncate'>authenticatePath(path)</span>
        </div>
      </div>
      <div class="clearfix display-none toggle-target">
        <section class='p2 mb2 clearfix bg-white minishadow'>

  

  <p>Returns authenticated version of given path, or the path itself if no current user.</p>
<p>Throws on authentication problems.</p>


  <div class='pre p1 fill-light mt0'>authenticatePath(path: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String">string</a>): <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise">Promise</a>&#x3C;<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String">string</a>></div>
  
  

  
  
  
  
  
  

  
    <div class='py1 quiet mt1 prose-big'>Parameters</div>
    <div class='prose'>
      
        <div class='space-bottom0'>
          <div>
            <span class='code bold'>path</span> <code class='quiet'>(<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String">string</a>)</code>
	    
          </div>
          
        </div>
      
    </div>
  

  

  
    
      <div class='py1 quiet mt1 prose-big'>Returns</div>
      <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise">Promise</a>&#x3C;<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String">string</a>></code>
    
  

  

  

  

  

  
</section>

      </div>
    </div>
  
    <div class='border-bottom' id='ServerRouterClient#getRoutePath'>
      <div class="clearfix small pointer toggle-sibling">
        <div class="py1 contain">
            <a class='icon pin-right py1 dark-link caret-right'>▸</a>
            <span class='code strong strong truncate'>getRoutePath(name, args)</span>
        </div>
      </div>
      <div class="clearfix display-none toggle-target">
        <section class='p2 mb2 clearfix bg-white minishadow'>

  

  <p>Returns unauthenticated path for given route and args.</p>


  <div class='pre p1 fill-light mt0'>getRoutePath(name: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String">string</a>, args: ...<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array">Array</a>&#x3C;any>): <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String">string</a></div>
  
  

  
  
  
  
  
  

  
    <div class='py1 quiet mt1 prose-big'>Parameters</div>
    <div class='prose'>
      
        <div class='space-bottom0'>
          <div>
            <span class='code bold'>name</span> <code class='quiet'>(<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String">string</a>)</code>
	    
          </div>
          
        </div>
      
        <div class='space-bottom0'>
          <div>
            <span class='code bold'>args</span> <code class='quiet'>(...<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array">Array</a>&#x3C;any>)</code>
	    
          </div>
          
        </div>
      
    </div>
  

  

  
    
      <div class='py1 quiet mt1 prose-big'>Returns</div>
      <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String">string</a></code>
    
  

  

  

  

  

  
</section>

      </div>
    </div>
  
</div>

  

  
</section>

          
        
      </div>
    </div>
  </div>
  <script src='assets/anchor.js'></script>
  <script src='assets/site.js'></script>
</body>
</html>
